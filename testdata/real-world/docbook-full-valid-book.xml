<?xml version="1.0" encoding="UTF-8"?>
<book xmlns="http://docbook.org/ns/docbook"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      version="5.1" xml:lang="en">

  <info>
    <title>The Rust Programming Language</title>
    <subtitle>A Comprehensive Guide</subtitle>
    <titleabbrev>Rust Guide</titleabbrev>
    <author>
      <personname>
        <firstname>Alice</firstname>
        <surname>Rustacean</surname>
        <othername>M.</othername>
      </personname>
      <affiliation>
        <orgname>Rust Foundation</orgname>
        <jobtitle>Principal Engineer</jobtitle>
      </affiliation>
      <email>alice@rust-lang.org</email>
      <uri>https://rust-lang.org/team/alice</uri>
    </author>
    <editor>
      <personname>
        <firstname>Bob</firstname>
        <surname>Editor</surname>
      </personname>
    </editor>
    <copyright>
      <year>2025</year>
      <year>2026</year>
      <holder>Rust Foundation</holder>
    </copyright>
    <pubdate>2026-01-01</pubdate>
    <releaseinfo>Third Edition</releaseinfo>
    <edition>3rd</edition>
    <productname>Rust Programming Language</productname>
    <productnumber>3.0</productnumber>
    <abstract>
      <title>About This Book</title>
      <para>A comprehensive guide to the Rust programming language,
      covering ownership, borrowing, lifetimes, and more.</para>
    </abstract>
    <keywordset>
      <keyword>rust</keyword>
      <keyword>programming</keyword>
      <keyword>systems</keyword>
    </keywordset>
    <subjectset scheme="LCSH">
      <subject>
        <subjectterm>Computer programming</subjectterm>
        <subjectterm>Systems programming</subjectterm>
      </subject>
    </subjectset>
    <legalnotice>
      <title>License</title>
      <para>This work is licensed under the MIT License.</para>
    </legalnotice>
    <revhistory>
      <revision>
        <revnumber>3.0</revnumber>
        <date>2026-01-01</date>
        <authorinitials>AR</authorinitials>
        <revremark>Third edition with <emphasis>async/await</emphasis> coverage.</revremark>
      </revision>
    </revhistory>
  </info>

  <preface>
    <title>Preface</title>
    <para>Welcome to <citetitle pubwork="book">The Rust Programming Language</citetitle>.
    This book will teach you about the Rust programming language from the ground up.</para>
    <para>To get started, you need to install <application>rustc</application> and
    <application>cargo</application>. Navigate to <guimenu>Settings</guimenu> and
    click <guibutton>Install</guibutton> or press <keycombo action="simul"><keycap>Ctrl</keycap><keycap>Shift</keycap><keycap>I</keycap></keycombo>.</para>
  </preface>

  <part>
    <title>Getting Started</title>
    <partintro>
      <para>This part covers the basics of Rust.</para>
    </partintro>

    <chapter xml:id="ch-hello">
      <info>
        <title>Hello, World!</title>
      </info>
      <title>Hello, World!</title>

      <para>Every Rust program starts with a <function>main</function> function.
      <indexterm><primary>main function</primary></indexterm>
      Let's write our first program:</para>

      <programlisting language="rust" linenumbering="numbered">fn main() {
    println!("Hello, world!");<co xml:id="co-println"/>
}</programlisting>

      <calloutlist>
        <callout arearefs="co-println">
          <para>The <literal>println!</literal> macro prints to standard output.</para>
        </callout>
      </calloutlist>

      <screen language="shell"><prompt>$ </prompt><userinput>cargo run</userinput>
<computeroutput>Hello, world!</computeroutput></screen>

      <formalpara>
        <title>Key Takeaway</title>
        <para>Rust uses <literal>fn</literal> to declare functions and
        <literal>!</literal> to invoke macros.</para>
      </formalpara>

      <section xml:id="sec-installing">
        <title>Installing Rust</title>
        <para>Install Rust using <command>rustup</command>:</para>
        <screen><prompt>$ </prompt><userinput>curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh</userinput></screen>

        <procedure>
          <title>Installation Steps</title>
          <step>
            <title>Download rustup</title>
            <para>Visit <uri>https://rustup.rs</uri> or run the command above.</para>
          </step>
          <step>
            <para>Follow the on-screen instructions. Choose
            <guilabel>Default installation</guilabel>.</para>
          </step>
          <step performance="optional">
            <title>Configure your editor</title>
            <para>Install <package>rust-analyzer</package> for IDE support.</para>
            <substeps>
              <step>
                <para>Open your editor's extensions panel.</para>
              </step>
              <step>
                <para>Search for <quote>rust-analyzer</quote> and install.</para>
              </step>
            </substeps>
          </step>
        </procedure>

        <tip>
          <para>Run <userinput>rustup update</userinput> regularly to stay current.</para>
        </tip>

        <section>
          <title>Verifying Installation</title>
          <para>Check that <command>rustc</command> is available:</para>
          <screen><prompt>$ </prompt><userinput>rustc --version</userinput>
<computeroutput>rustc 1.76.0 (07dca489a 2026-02-04)</computeroutput></screen>
        </section>
      </section>
    </chapter>

    <chapter xml:id="ch-ownership">
      <title>Ownership</title>
      <para>Ownership is Rust's most unique feature.
      <indexterm><primary>ownership</primary><secondary>rules</secondary></indexterm>
      The key rules are:</para>

      <orderedlist numeration="arabic" spacing="compact">
        <listitem>
          <para>Each value has an <firstterm baseform="owner">owner</firstterm>.</para>
        </listitem>
        <listitem>
          <para>There can only be one owner at a time.</para>
        </listitem>
        <listitem>
          <para>When the owner goes out of scope, the value is dropped.</para>
        </listitem>
      </orderedlist>

      <note>
        <title>Important</title>
        <para>Understanding ownership is <emphasis role="strong">critical</emphasis> for writing safe Rust code.</para>
      </note>

      <sidebar>
        <title>Stack vs Heap</title>
        <para>Types with a known size at compile time (like <type>i32</type>) are stored on the stack.
        Dynamic types like <classname>String</classname> store data on the heap.</para>
      </sidebar>

      <table>
        <title>Ownership Transfer</title>
        <tgroup cols="3">
          <colspec colname="op" colwidth="1*"/>
          <colspec colname="stack" colwidth="2*"/>
          <colspec colname="heap" colwidth="2*"/>
          <thead>
            <row>
              <entry>Operation</entry>
              <entry>Stack Types</entry>
              <entry>Heap Types</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><literal>let y = x</literal></entry>
              <entry><para>Copy (both valid)</para></entry>
              <entry><para>Move (<varname>x</varname> invalidated)</para></entry>
            </row>
            <row>
              <entry><literal>fn(x)</literal></entry>
              <entry><para>Copy</para></entry>
              <entry><para>Move into function</para></entry>
            </row>
          </tbody>
        </tgroup>
      </table>

      <epigraph>
        <attribution>Graydon Hoare</attribution>
        <para>Memory safety without garbage collection.</para>
      </epigraph>

      <section xml:id="sec-borrowing">
        <title>Borrowing</title>
        <para>Instead of transferring ownership, you can <glossterm baseform="borrow">borrow</glossterm>
        a reference using <literal>&amp;</literal>:</para>

        <programlisting language="rust">fn calculate_length(s: &amp;String) -&gt; usize {
    s.len()
}</programlisting>

        <caution>
          <para>You cannot have a mutable reference while immutable references exist.</para>
        </caution>

        <bridgehead renderas="sect3">Mutable References</bridgehead>

        <para>Create mutable references with <literal>&amp;mut</literal>:
        <anchor xml:id="anchor-mutref"/>
        <remark>TODO: Add more examples here.</remark></para>

        <itemizedlist mark="bullet" spacing="normal">
          <title>Rules of References</title>
          <listitem>
            <para>You may have <emphasis>either</emphasis> one mutable reference <emphasis>or</emphasis> any number of immutable references.</para>
          </listitem>
          <listitem>
            <para>References must always be valid (no dangling references).</para>
          </listitem>
        </itemizedlist>

        <informalexample>
          <programlisting language="rust">let mut s = String::from("hello");
let r = &amp;mut s;
r.push_str(", world");
println!("{r}");</programlisting>
        </informalexample>
      </section>
    </chapter>
  </part>

  <appendix xml:id="app-keywords">
    <title>Rust Keywords</title>
    <para>The following is a list of keywords currently in use by Rust:</para>
    <simplelist type="inline">
      <member><literal>as</literal></member>
      <member><literal>break</literal></member>
      <member><literal>const</literal></member>
      <member><literal>continue</literal></member>
      <member><literal>fn</literal></member>
      <member><literal>let</literal></member>
      <member><literal>mut</literal></member>
      <member><literal>return</literal></member>
    </simplelist>

    <segmentedlist>
      <title>Keywords by Category</title>
      <segtitle>Category</segtitle>
      <segtitle>Keywords</segtitle>
      <seglistitem>
        <seg>Control Flow</seg>
        <seg><literal>if</literal>, <literal>else</literal>, <literal>match</literal></seg>
      </seglistitem>
      <seglistitem>
        <seg>Declarations</seg>
        <seg><literal>let</literal>, <literal>const</literal>, <literal>static</literal></seg>
      </seglistitem>
    </segmentedlist>
  </appendix>

  <glossary xml:id="glossary">
    <title>Glossary</title>
    <glossdiv>
      <title>O</title>
      <glossentry xml:id="gl-ownership" sortas="ownership">
        <glossterm>Ownership</glossterm>
        <glossdef>
          <para>Rust's system for managing memory through a set of rules checked at compile time.</para>
          <glossseealso otherterm="gl-borrowing">Borrowing</glossseealso>
        </glossdef>
      </glossentry>
    </glossdiv>
    <glossdiv>
      <title>B</title>
      <glossentry xml:id="gl-borrowing" sortas="borrowing">
        <glossterm>Borrowing</glossterm>
        <glossdef>
          <para>Creating a reference to a value without taking ownership.</para>
        </glossdef>
        <glosssee otherterm="gl-ownership">Ownership</glosssee>
      </glossentry>
    </glossdiv>
  </glossary>

  <bibliography>
    <title>Bibliography</title>
    <bibliodiv>
      <title>Primary Sources</title>
      <biblioentry>
        <title>The Rust Programming Language</title>
        <author><personname><firstname>Steve</firstname><surname>Klabnik</surname></personname></author>
        <author><personname><firstname>Carol</firstname><surname>Nichols</surname></personname></author>
        <pubdate>2023</pubdate>
        <publisher>
          <publishername>No Starch Press</publishername>
          <address>San Francisco, CA</address>
        </publisher>
        <isbn>978-1-7185-0310-6</isbn>
      </biblioentry>
    </bibliodiv>
    <bibliomixed>Hoare, Graydon. <citetitle pubwork="article">The Rust Language</citetitle>. 2010.</bibliomixed>
  </bibliography>

  <index>
    <title>Index</title>
    <indexdiv>
      <title>O</title>
      <para>Ownership, see <xref linkend="ch-ownership"/>.</para>
    </indexdiv>
  </index>

  <colophon>
    <title>Colophon</title>
    <para>This book was typeset using <application>DocBook</application> XML
    and processed with <application>xsltproc</application>.</para>
  </colophon>
</book>
